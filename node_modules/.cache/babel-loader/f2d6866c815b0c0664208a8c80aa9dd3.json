{"ast":null,"code":"import PollTypes from \"./pollTypes\";\nimport { v4 as uuidv4 } from 'uuid';\nconst initialState = {\n  \"connected_role\": \"Owner\",\n  //\"Owner\", \"User\" , \"Respondent\"\n  \"poll_main_question\": \"What is the value of π ?\",\n  \"poll_question_options\": [{\n    id: 1,\n    answer: \"3.14\",\n    votes: 12\n  }, {\n    id: 2,\n    answer: \"3.1416\",\n    votes: 5\n  }, {\n    id: 3,\n    answer: \"3.1415\",\n    votes: 10\n  }]\n};\nconst resetState = {\n  \"connected_role\": \"Owner\",\n  //\"Owner\", \"User\" , \"Respondent\"\n  \"poll_main_question\": \"\",\n  \"poll_question_options\": [{\n    id: 1,\n    answer: \"\",\n    votes: 0\n  }, {\n    id: 2,\n    answer: \"\",\n    votes: 0\n  }]\n};\n\nconst PollReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case PollTypes.ADD_POLL:\n      {\n        return Object.assign({ ...state,\n          poll_question_options: [...state.poll_question_options, {\n            id: uuidv4(),\n            answer: action.payload,\n            votes: 0\n          }]\n        });\n      }\n\n    case PollTypes.RESET_POLL:\n      {\n        return resetState;\n      }\n\n    case PollTypes.UPDATE_QUESTION:\n      {\n        return Object.assign({ ...state,\n          poll_main_question: action.payload\n        });\n      }\n\n    case PollTypes.REMOVE_AN_ANSWER:\n      {\n        const prev_state = Object.assign({ ...state\n        });\n        const new_poll_question_options = prev_state.poll_question_options.filter(poll => {\n          return poll.id != action.payload;\n        });\n        return Object.assign({ ...state,\n          poll_question_options: new_poll_question_options\n        });\n      }\n\n    case PollTypes.UPDATE_SINGLE_ANSWER:\n      {\n        const prev_state = Object.assign({ ...state\n        });\n        const new_poll_question_options = prev_state.poll_question_options.map(poll => {\n          if (poll.id == action.payload.id) {\n            return Object.assign(poll, {\n              answer: action.payload.content\n            });\n          } else {\n            return poll;\n          }\n        });\n        return Object.assign({ ...state,\n          poll_question_options: new_poll_question_options\n        });\n      }\n\n    case PollTypes.VOTING:\n      {\n        const prev_state = Object.assign({ ...state\n        });\n        const new_poll_question_options = prev_state.poll_question_options.map(poll => {\n          if (poll.id == action.payload) {\n            return Object.assign(poll, {\n              votes: poll.votes + 1\n            });\n          } else {\n            return poll;\n          }\n        });\n        return Object.assign({ ...state,\n          poll_question_options: new_poll_question_options\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\n_c = PollReducer;\nexport default PollReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"PollReducer\");","map":{"version":3,"names":["PollTypes","v4","uuidv4","initialState","id","answer","votes","resetState","PollReducer","state","action","type","ADD_POLL","Object","assign","poll_question_options","payload","RESET_POLL","UPDATE_QUESTION","poll_main_question","REMOVE_AN_ANSWER","prev_state","new_poll_question_options","filter","poll","UPDATE_SINGLE_ANSWER","map","content","VOTING"],"sources":["/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/store/Polls/pollReducer.tsx"],"sourcesContent":["import { IPollQuestionOptions } from \"../../@types/poll.d\";\nimport PollTypes from \"./pollTypes\";\nimport { v4 as uuidv4 } from 'uuid';\n\ntype TPayload = {\n    id:string ,\n    content:string\n}\n\ninterface IActionA{\n    type:string,\n    payload: string | number\n}\n\ninterface IActionB{\n    type:string,\n    payload:TPayload\n}\n\nconst initialState = {\n    \"connected_role\":\"Owner\", //\"Owner\", \"User\" , \"Respondent\"\n    \"poll_main_question\":\"What is the value of π ?\",\n    \"poll_question_options\":[\n        {\n            id:1,\n            answer:\"3.14\",\n            votes:12\n        },\n        {\n            id:2,\n            answer:\"3.1416\",\n            votes:5\n        },\n        {\n            id:3,\n            answer:\"3.1415\",\n            votes:10\n        },\n        \n    ]\n}\n\nconst resetState =  {\n    \"connected_role\":\"Owner\", //\"Owner\", \"User\" , \"Respondent\"\n    \"poll_main_question\":\"\",\n    \"poll_question_options\":[\n        {\n            id:1,\n            answer:\"\",\n            votes:0\n        },\n        {\n            id:2,\n            answer:\"\",\n            votes:0\n        },\n    ]\n}\n\nconst PollReducer = (state=initialState,action:(IActionA | IActionB)) =>{\n\n    switch(action.type){\n\n        case PollTypes.ADD_POLL :{\n            return Object.assign({...state, poll_question_options:[...state.poll_question_options,{\n                id:uuidv4(),\n                answer:action.payload,\n                votes:0\n            }]});\n        }\n\n        case PollTypes.RESET_POLL :{\n            return resetState;\n        }\n\n        case PollTypes.UPDATE_QUESTION :{\n            return  Object.assign({...state, poll_main_question:action.payload});\n        }\n\n        case PollTypes.REMOVE_AN_ANSWER :{\n\n            const prev_state = Object.assign({...state});\n\n            const new_poll_question_options = prev_state.poll_question_options.filter((poll:IPollQuestionOptions)=>{\n                return poll.id != action.payload\n            });\n\n            return Object.assign({...state, poll_question_options:new_poll_question_options});\n\n        }\n\n        case PollTypes.UPDATE_SINGLE_ANSWER :{\n\n            const prev_state = Object.assign({...state});\n\n            const new_poll_question_options = prev_state.poll_question_options.map((poll:IPollQuestionOptions)=>{\n                if(poll.id == action.payload.id){\n                   return Object.assign(poll,{answer:action.payload.content});\n                 }else{\n                    return poll\n                 } \n            });\n\n            return Object.assign({...state, poll_question_options:new_poll_question_options});\n\n        }\n\n        case PollTypes.VOTING :{\n\n            const prev_state = Object.assign({...state});\n\n            const new_poll_question_options = prev_state.poll_question_options.map((poll:IPollQuestionOptions)=>{\n                if(poll.id == action.payload){\n                   return Object.assign(poll, {votes:(poll.votes + 1)});\n                 }else{\n                    return poll\n                 } \n            });\n\n            return Object.assign({...state, poll_question_options:new_poll_question_options});\n\n        }\n    \n        default:{\n            return state;\n        }\n\n    }\n\n}\n\nexport default PollReducer;\n"],"mappings":"AACA,OAAOA,SAAP,MAAsB,aAAtB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AAiBA,MAAMC,YAAY,GAAG;EACjB,kBAAiB,OADA;EACS;EAC1B,sBAAqB,0BAFJ;EAGjB,yBAAwB,CACpB;IACIC,EAAE,EAAC,CADP;IAEIC,MAAM,EAAC,MAFX;IAGIC,KAAK,EAAC;EAHV,CADoB,EAMpB;IACIF,EAAE,EAAC,CADP;IAEIC,MAAM,EAAC,QAFX;IAGIC,KAAK,EAAC;EAHV,CANoB,EAWpB;IACIF,EAAE,EAAC,CADP;IAEIC,MAAM,EAAC,QAFX;IAGIC,KAAK,EAAC;EAHV,CAXoB;AAHP,CAArB;AAuBA,MAAMC,UAAU,GAAI;EAChB,kBAAiB,OADD;EACU;EAC1B,sBAAqB,EAFL;EAGhB,yBAAwB,CACpB;IACIH,EAAE,EAAC,CADP;IAEIC,MAAM,EAAC,EAFX;IAGIC,KAAK,EAAC;EAHV,CADoB,EAMpB;IACIF,EAAE,EAAC,CADP;IAEIC,MAAM,EAAC,EAFX;IAGIC,KAAK,EAAC;EAHV,CANoB;AAHR,CAApB;;AAiBA,MAAME,WAAW,GAAG,YAAoD;EAAA,IAAnDC,KAAmD,uEAA7CN,YAA6C;EAAA,IAAhCO,MAAgC;;EAEpE,QAAOA,MAAM,CAACC,IAAd;IAEI,KAAKX,SAAS,CAACY,QAAf;MAAyB;QACrB,OAAOC,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL,KAAJ;UAAWM,qBAAqB,EAAC,CAAC,GAAGN,KAAK,CAACM,qBAAV,EAAgC;YAClFX,EAAE,EAACF,MAAM,EADyE;YAElFG,MAAM,EAACK,MAAM,CAACM,OAFoE;YAGlFV,KAAK,EAAC;UAH4E,CAAhC;QAAjC,CAAd,CAAP;MAKH;;IAED,KAAKN,SAAS,CAACiB,UAAf;MAA2B;QACvB,OAAOV,UAAP;MACH;;IAED,KAAKP,SAAS,CAACkB,eAAf;MAAgC;QAC5B,OAAQL,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL,KAAJ;UAAWU,kBAAkB,EAACT,MAAM,CAACM;QAArC,CAAd,CAAR;MACH;;IAED,KAAKhB,SAAS,CAACoB,gBAAf;MAAiC;QAE7B,MAAMC,UAAU,GAAGR,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL;QAAJ,CAAd,CAAnB;QAEA,MAAMa,yBAAyB,GAAGD,UAAU,CAACN,qBAAX,CAAiCQ,MAAjC,CAAyCC,IAAD,IAA6B;UACnG,OAAOA,IAAI,CAACpB,EAAL,IAAWM,MAAM,CAACM,OAAzB;QACH,CAFiC,CAAlC;QAIA,OAAOH,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL,KAAJ;UAAWM,qBAAqB,EAACO;QAAjC,CAAd,CAAP;MAEH;;IAED,KAAKtB,SAAS,CAACyB,oBAAf;MAAqC;QAEjC,MAAMJ,UAAU,GAAGR,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL;QAAJ,CAAd,CAAnB;QAEA,MAAMa,yBAAyB,GAAGD,UAAU,CAACN,qBAAX,CAAiCW,GAAjC,CAAsCF,IAAD,IAA6B;UAChG,IAAGA,IAAI,CAACpB,EAAL,IAAWM,MAAM,CAACM,OAAP,CAAeZ,EAA7B,EAAgC;YAC7B,OAAOS,MAAM,CAACC,MAAP,CAAcU,IAAd,EAAmB;cAACnB,MAAM,EAACK,MAAM,CAACM,OAAP,CAAeW;YAAvB,CAAnB,CAAP;UACD,CAFF,MAEM;YACF,OAAOH,IAAP;UACF;QACL,CANiC,CAAlC;QAQA,OAAOX,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL,KAAJ;UAAWM,qBAAqB,EAACO;QAAjC,CAAd,CAAP;MAEH;;IAED,KAAKtB,SAAS,CAAC4B,MAAf;MAAuB;QAEnB,MAAMP,UAAU,GAAGR,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL;QAAJ,CAAd,CAAnB;QAEA,MAAMa,yBAAyB,GAAGD,UAAU,CAACN,qBAAX,CAAiCW,GAAjC,CAAsCF,IAAD,IAA6B;UAChG,IAAGA,IAAI,CAACpB,EAAL,IAAWM,MAAM,CAACM,OAArB,EAA6B;YAC1B,OAAOH,MAAM,CAACC,MAAP,CAAcU,IAAd,EAAoB;cAAClB,KAAK,EAAEkB,IAAI,CAAClB,KAAL,GAAa;YAArB,CAApB,CAAP;UACD,CAFF,MAEM;YACF,OAAOkB,IAAP;UACF;QACL,CANiC,CAAlC;QAQA,OAAOX,MAAM,CAACC,MAAP,CAAc,EAAC,GAAGL,KAAJ;UAAWM,qBAAqB,EAACO;QAAjC,CAAd,CAAP;MAEH;;IAED;MAAQ;QACJ,OAAOb,KAAP;MACH;EAhEL;AAoEH,CAtED;;KAAMD,W;AAwEN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}