{"ast":null,"code":"import _slicedToArray from\"/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Button from'../FormInput/Button/Button';import Label from'../FormInput/Label/Label';import LabelWithButton from'../FormInput/LabelWithButton/LabelWithButton';import TextInput from'../FormInput/TextInput/TextInput';import TextInputWithButton from'../FormInput/TextInputWithButton/TextInputWithButton';import\"./PollForm.css\";import{useSelector,useDispatch}from'react-redux';import{ADD_POLL_ACTION,UPDATE_QUESTION_ACTION,REMOVE_AN_ANSWER_ACTION,RESET_POLL_ACTION,UPDATE_SINGLE_ANSWER_ACTION}from\"../../store/Polls/pollActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PollForm(props){// Dipatcher \nvar dispatch=useDispatch();// use Selector\nvar _useSelector=useSelector(function(state){return state.Poll;}),poll_main_question=_useSelector.poll_main_question,poll_question_options=_useSelector.poll_question_options;// Initiate states\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newAnswer=_useState2[0],setNewAnswer=_useState2[1];// Initiate states\nvar handleAnswerChange=function handleAnswerChange(event){setNewAnswer(event.target.value);};// handle question change\nvar handleQuestionChange=function handleQuestionChange(event){dispatch(UPDATE_QUESTION_ACTION(event.target.value));};// handle new answer \nvar handleSingleAnswerChange=function handleSingleAnswerChange(event,id){console.log(event.target.value,id);dispatch(UPDATE_SINGLE_ANSWER_ACTION(id,event.target.value));};useEffect(function(){},[]);// handle click add\nvar addNewAnswer=function addNewAnswer(){if(newAnswer!=\"\"){dispatch(ADD_POLL_ACTION(newAnswer));setNewAnswer(\"\");}};//removeAnswer\nvar removeAnswer=function removeAnswer(id){if(poll_question_options.length>2){dispatch(REMOVE_AN_ANSWER_ACTION(id));}else{// must have 2 options at least\n}};//resetPoll\nvar resetPoll=function resetPoll(){dispatch(RESET_POLL_ACTION());};return/*#__PURE__*/_jsxs(\"section\",{className:\"Section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"SubSection\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"PollQuestionContainer\",children:[/*#__PURE__*/_jsx(TextInput,{style:{width:\"calc(100% - 99px)\",marginRight:\"15px\"},name:\"poll_question\",placeholder:\"Type your question\",value:String(poll_main_question),onChange:function onChange(event){handleQuestionChange(event);},maxlength:80}),/*#__PURE__*/_jsx(\"div\",{className:\"PollQuestion\",children:poll_question_options.map(function(poll,ind){return/*#__PURE__*/_jsxs(TextInputWithButton,{children:[/*#__PURE__*/_jsx(TextInput,{style:{width:\"calc(100% - 99px)\",marginRight:\"15px\"},name:\"poll_question\",placeholder:\"Type an answer\",onChange:function onChange(event){handleSingleAnswerChange(event,String(poll.id));},defaultValue:String(poll.answer),maxlength:80},poll.id),/*#__PURE__*/_jsx(Button,{disabled:poll_question_options.length<=2?true:false,onClick:function onClick(){removeAnswer(String(poll.id));},style:{\"width\":\"60px\",height:\"40px\"},text:\"X\"})]},poll.id);})}),poll_question_options.length<10&&/*#__PURE__*/_jsxs(TextInputWithButton,{children:[/*#__PURE__*/_jsx(TextInput,{style:{width:\"calc(100% - 99px)\",marginRight:\"15px\"},onChange:handleAnswerChange,name:\"poll_question\",placeholder:\"Type an answer\",value:newAnswer,maxlength:80}),/*#__PURE__*/_jsx(Button,{onClick:addNewAnswer,style:{\"width\":\"60px\",height:\"40px\"},text:\"Add\"})]})]})}),/*#__PURE__*/_jsxs(LabelWithButton,{children:[/*#__PURE__*/_jsx(Label,{style:{marginRight:\"15px\"},content:\"\".concat(poll_question_options.length,\"/10 Possible answers\")}),/*#__PURE__*/_jsx(Button,{onClick:resetPoll,style:{minWidth:\"80px\",height:\"40px\"},text:\"Reset\"})]})]});}export default PollForm;","map":{"version":3,"names":["React","useEffect","useState","Button","Label","LabelWithButton","TextInput","TextInputWithButton","useSelector","useDispatch","ADD_POLL_ACTION","UPDATE_QUESTION_ACTION","REMOVE_AN_ANSWER_ACTION","RESET_POLL_ACTION","UPDATE_SINGLE_ANSWER_ACTION","PollForm","props","dispatch","state","Poll","poll_main_question","poll_question_options","newAnswer","setNewAnswer","handleAnswerChange","event","target","value","handleQuestionChange","handleSingleAnswerChange","id","console","log","addNewAnswer","removeAnswer","length","resetPoll","width","marginRight","String","map","poll","ind","answer","height","minWidth"],"sources":["/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollForm/PollForm.tsx"],"sourcesContent":["import React, { useEffect, useState  } from 'react';\nimport Button from '../FormInput/Button/Button';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport TextInput from '../FormInput/TextInput/TextInput';\nimport TextInputWithButton from '../FormInput/TextInputWithButton/TextInputWithButton';\nimport \"./PollForm.css\";\n\nimport { useSelector , useDispatch , shallowEqual} from 'react-redux';\n\nimport { IPollQuestionOptions} from '../../@types/poll.d';\nimport { RootState } from '../../store/Store';\n\nimport { ADD_POLL_ACTION , UPDATE_QUESTION_ACTION , REMOVE_AN_ANSWER_ACTION , RESET_POLL_ACTION, UPDATE_SINGLE_ANSWER_ACTION  } from \"../../store/Polls/pollActions\";\n\ninterface IProps{\n  children?: React.ReactNode,\n}\n\nfunction PollForm( props :IProps) {\n\n  // Dipatcher \n  const dispatch = useDispatch();\n\n  // use Selector\n  const {poll_main_question,poll_question_options} = useSelector((state:RootState) =>(state.Poll));\n\n  // Initiate states\n  const [newAnswer,setNewAnswer] = useState<string>(\"\");\n\n  // Initiate states\n  const handleAnswerChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setNewAnswer(event.target.value);\n  };\n\n  // handle question change\n  const handleQuestionChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    dispatch(UPDATE_QUESTION_ACTION(event.target.value));\n  };\n\n  // handle new answer \n  const handleSingleAnswerChange = (event: React.ChangeEvent<HTMLInputElement> , id : string) => {\n    console.log(event.target.value,id);\n    dispatch(UPDATE_SINGLE_ANSWER_ACTION(id,event.target.value));\n  };\n\n  useEffect(()=>{ \n  },[]);\n\n  // handle click add\n  const addNewAnswer = () =>{\n\n    if(newAnswer != \"\"){\n      dispatch(ADD_POLL_ACTION(newAnswer));\n      setNewAnswer(\"\");\n    }\n  }\n\n  //removeAnswer\n  const removeAnswer = (id:string)=>{\n      if(poll_question_options.length > 2){\n        dispatch(REMOVE_AN_ANSWER_ACTION(id));\n      }else{\n          // must have 2 options at least\n      }\n  }\n\n  //resetPoll\n  const resetPoll = ()=>{\n    dispatch(RESET_POLL_ACTION());\n  }\n\n  return(\n\n    <section className='Section'>\n\n      <div className='SubSection'>\n\n        <div className='PollQuestionContainer'>\n\n          <TextInput style={{width:\"calc(100% - 99px)\",marginRight:\"15px\"}} \n                     name=\"poll_question\" \n                     placeholder=\"Type your question\"\n                     value={String(poll_main_question)}\n                     onChange={(event)=>{handleQuestionChange(event)}}\n                     maxlength={80}\n          />\n\n          <div className='PollQuestion'>\n              {\n                poll_question_options.map((poll:IPollQuestionOptions,ind:IPollQuestionOptions[\"id\"])=>{\n                  return(\n                    <TextInputWithButton key={poll.id}>\n                      <TextInput style={{width:\"calc(100% - 99px)\",marginRight:\"15px\"}} \n                                 key={poll.id} \n                                 name=\"poll_question\"\n                                 placeholder=\"Type an answer\"\n                                 onChange={(event) => {handleSingleAnswerChange(event,String(poll.id))}}\n                                 defaultValue={String(poll.answer)}\n                                 maxlength={80}\n                      />\n                      <Button disabled={poll_question_options.length <=2 ? true : false} \n                              onClick={()=>{removeAnswer(String(poll.id))}} \n                              style={{\"width\":\"60px\",height:\"40px\"}} \n                              text=\"X\"/>\n                    </TextInputWithButton>\n                  )\n                })\n              }\n\n          </div>\n\n          {\n                 poll_question_options.length < 10 && <TextInputWithButton>\n                      <TextInput style={{width:\"calc(100% - 99px)\",marginRight:\"15px\"}} \n                                  onChange={handleAnswerChange}\n                                  name=\"poll_question\" \n                                  placeholder=\"Type an answer\"\n                                  value={newAnswer}\n                                  maxlength={80}\n                      />\n                      <Button onClick={addNewAnswer} style={{\"width\":\"60px\",height:\"40px\"}} text=\"Add\"/>\n                  </TextInputWithButton>\n          }\n\n        </div>\n\n      \n      </div>\n\n      <LabelWithButton>\n             <Label style={{marginRight:\"15px\"}} content={`${poll_question_options.length}/10 Possible answers`}/>\n              <Button onClick={resetPoll} style={{minWidth:\"80px\",height:\"40px\"}} text=\"Reset\"/>\n      </LabelWithButton>\n\n    </section>\n  )\n}\n\nexport default PollForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}