{"ast":null,"code":"import React,{useEffect}from'react';import Label from'../FormInput/Label/Label';import LabelWithButton from'../FormInput/LabelWithButton/LabelWithButton';import{Bar}from'react-chartjs-2';import ChartDataLabels from'chartjs-plugin-datalabels';import{useSelector}from'react-redux';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Tooltip}from'chart.js';import Empty from'../FormInput/Empty/Empty';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Register ChartJs\nChartJS.register(CategoryScale,LinearScale,BarElement,Tooltip,ChartDataLabels);var PollResult=function PollResult(props){// useSelectot\nvar _useSelector=useSelector(function(state){return state.Poll;}),poll_question_options=_useSelector.poll_question_options,poll_main_question=_useSelector.poll_main_question,connected_role=_useSelector.connected_role;useEffect(function(){},[]);// generate label array\nvar dynamicLabels=function dynamicLabels(){return poll_question_options.map(function(poll,ind){return poll.answer;});};// generate vote rates array\nvar dynamicVotes=function dynamicVotes(){return poll_question_options.map(function(poll,ind){return poll.votes;});};// generate random colors\nvar colorPicker=function colorPicker(){var colorsPalette=['#FF6633','#FFB399','#FF33FF','#FFFF99','#00B3E6','#E6B333','#3366E6','#999966','#99FF99','#B34D4D','#80B300','#809900','#E6B3B3','#6680B3','#66991A','#FF99E6','#CCFF1A','#FF1A66','#E6331A','#33FFCC','#66994D','#B366CC','#4D8000','#B33300','#CC80CC','#66664D','#991AFF','#E666FF','#4DB3FF','#1AB399','#E666B3','#33991A','#CC9999','#B3B31A','#00E680','#4D8066','#809980','#E6FF80','#1AFF33','#999933','#FF3380','#CCCC00','#66E64D','#4D80CC','#9900B3','#E64D66','#4DB380','#FF4D4D','#99E6E6','#6666FF'];return poll_question_options.map(function(poll,ind){return colorsPalette[ind];});};// generate vote rates array\nvar totalVotes=function totalVotes(){return poll_question_options.reduce(function(acc,poll){return acc+poll.votes;},0);};// ChartJs display options\nvar options={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:'Chart.js Bar Chart'}},scales:{y:{grace:'5%'}}};// ChartJs display labels\nvar labels=dynamicLabels();// ChartJs data\nvar data={labels:labels,datasets:[{data:dynamicVotes(),backgroundColor:colorPicker(),datalabels:{align:'end',anchor:'end',formatter:function formatter(value,ctx){return value;},color:'black',font:{size:14,weight:500}}}]};return/*#__PURE__*/_jsxs(\"section\",{className:\"Section\",style:connected_role==\"User\"?{maxWidth:\"600px\",margin:\"0px auto\"}:{},children:[poll_question_options.length<2?/*#__PURE__*/_jsx(\"div\",{className:\"SubSection SubSectionCenter\",children:/*#__PURE__*/_jsx(Empty,{imgSrc:\"./icons/emptyChart.png\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"SubSection SubSectionCenter\",children:[/*#__PURE__*/_jsx(\"h1\",{children:poll_main_question}),/*#__PURE__*/_jsx(\"div\",{className:\"PollQuestionContainer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"PollQuestion\",children:/*#__PURE__*/_jsx(Bar,{options:options,data:data})})})]}),poll_question_options.length>=2&&/*#__PURE__*/_jsx(LabelWithButton,{style:{},children:/*#__PURE__*/_jsx(Label,{style:{marginRight:\"15px\"},content:\"Total votes : \".concat(totalVotes())})})]});};export default PollResult;","map":{"version":3,"names":["React","useEffect","Label","LabelWithButton","Bar","ChartDataLabels","useSelector","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Tooltip","Empty","register","PollResult","props","state","Poll","poll_question_options","poll_main_question","connected_role","dynamicLabels","map","poll","ind","answer","dynamicVotes","votes","colorPicker","colorsPalette","totalVotes","reduce","acc","options","responsive","plugins","legend","position","title","display","text","scales","y","grace","labels","data","datasets","backgroundColor","datalabels","align","anchor","formatter","value","ctx","color","font","size","weight","maxWidth","margin","length","marginRight"],"sources":["/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollResult/PollResult.tsx"],"sourcesContent":["import React ,{ useState , useEffect } from 'react';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\n\nimport { useSelector} from 'react-redux';\n\n\nimport { RootState } from '../../store/Store';\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip\n} from 'chart.js';\nimport Empty from '../FormInput/Empty/Empty';\nimport { IPollQuestionOptions } from '../../@types/poll.d';\n\ninterface IProps{}\n\n// Register ChartJs\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip,\n  ChartDataLabels\n);\n\nconst PollResult = (props:IProps) => {\n\n  // useSelectot\n  const {poll_question_options, poll_main_question, connected_role} = useSelector((state:RootState) => (state.Poll));\n\n  useEffect(()=>{\n  },[]);\n\n  // generate label array\n  const dynamicLabels = () =>{\n    return(poll_question_options.map((poll:IPollQuestionOptions,ind:IPollQuestionOptions[\"id\"])=>{\n        return poll.answer;\n    }));\n  }\n\n  // generate vote rates array\n  const dynamicVotes = () =>{\n    return(poll_question_options.map((poll:IPollQuestionOptions,ind:IPollQuestionOptions[\"id\"])=>{\n        return poll.votes;\n    }));\n  }\n\n  // generate random colors\n  const colorPicker = () =>{\n    const colorsPalette = ['#FF6633', '#FFB399', '#FF33FF', '#FFFF99', '#00B3E6', \n    '#E6B333', '#3366E6', '#999966', '#99FF99', '#B34D4D',\n    '#80B300', '#809900', '#E6B3B3', '#6680B3', '#66991A', \n    '#FF99E6', '#CCFF1A', '#FF1A66', '#E6331A', '#33FFCC',\n    '#66994D', '#B366CC', '#4D8000', '#B33300', '#CC80CC', \n    '#66664D', '#991AFF', '#E666FF', '#4DB3FF', '#1AB399',\n    '#E666B3', '#33991A', '#CC9999', '#B3B31A', '#00E680', \n    '#4D8066', '#809980', '#E6FF80', '#1AFF33', '#999933',\n    '#FF3380', '#CCCC00', '#66E64D', '#4D80CC', '#9900B3', \n    '#E64D66', '#4DB380', '#FF4D4D', '#99E6E6', '#6666FF'];\n    return(poll_question_options.map((poll:IPollQuestionOptions,ind:number)=>{\n        return colorsPalette[ind];\n    }));\n  }\n\n  // generate vote rates array\n  const totalVotes = () =>{\n    return(poll_question_options.reduce((acc:number,poll:IPollQuestionOptions)=>{\n        return acc + poll.votes\n    },0));\n  }\n\n  // ChartJs display options\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top' as const,\n      },\n      title: {\n        display: true,\n        text: 'Chart.js Bar Chart',\n      },\n    },\n    scales: {\n        y: {\n          grace: '5%'\n        }\n    }\n  };\n\n  // ChartJs display labels\n  const labels = dynamicLabels();\n  \n  // ChartJs data\n  const data = {\n    labels,\n    datasets: [\n      {\n        data: dynamicVotes(),\n        backgroundColor: colorPicker() ,\n        datalabels: {\n          align: 'end' as const,\n          anchor: 'end' as const,\n          formatter: function(value:string, ctx:object) {\n              return value;\n          },\n          color:'black',\n          font:{\n              size: 14,\n              weight:500\n          }\n        }\n      }\n    ]\n  };\n\n  return (\n    <section className='Section' style={(connected_role == \"User\") ? {maxWidth:\"600px\",margin:\"0px auto\"} : {}}>\n      { \n          poll_question_options.length < 2 ?\n          <div className='SubSection SubSectionCenter'>\n                <Empty imgSrc={\"./icons/emptyChart.png\"} /> \n              </div>\n            : \n      \n          <div className='SubSection SubSectionCenter'>\n\n            <h1>{poll_main_question}</h1>\n\n            <div className='PollQuestionContainer'>\n\n              <div className='PollQuestion'>\n                <Bar options={options} data={data} />\n              </div>\n\n            </div>\n\n          </div>\n      }\n      {\n          poll_question_options.length >= 2  &&  <LabelWithButton style={{}}>\n                <Label style={{marginRight:\"15px\"}} content={`Total votes : ${totalVotes()}`}/>\n          </LabelWithButton>\n      }\n    </section>\n  )\n}\n\nexport default PollResult"],"mappings":"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"},"metadata":{},"sourceType":"module"}