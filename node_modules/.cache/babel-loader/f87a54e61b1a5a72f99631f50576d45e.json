{"ast":null,"code":"var _jsxFileName = \"/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollResult/PollResult.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Tooltip } from 'chart.js'; //import PollProvider\n\nimport PollConsumer from '../../contexts/pollContext/PollConsumer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Register ChartJs\nChartJS.register(CategoryScale, LinearScale, BarElement, Tooltip, ChartDataLabels);\n\nfunction PollResult(props) {\n  _s();\n\n  // Manage ChartJs options and data\n  const [options, setOptions] = useState();\n  const [data, setData] = useState(); // use Pollconsumer\n\n  const {\n    poll_question_options,\n    poll_main_question,\n    total_votes\n  } = PollConsumer(); // generate label array\n\n  const dynamicLabels = () => {\n    return poll_question_options.map((poll, ind) => {\n      return poll.answer;\n    });\n  }; // generate vote rates array\n\n\n  const dynamicVotes = () => {\n    return poll_question_options.map((poll, ind) => {\n      return poll.votes;\n    });\n  }; // generate vote rates array\n\n\n  const totalVotes = () => {\n    return poll_question_options.reduce((acc, poll) => {\n      return acc + poll.votes;\n    }, 0);\n  }; //useEffect \n\n\n  useEffect(() => {\n    // ChartJs display labels\n    setOptions(dynamicLabels()); // ChartJs data\n\n    setData({\n      labels,\n      datasets: [{\n        data: dynamicVotes(),\n        backgroundColor: [\"red\", \"blue\", \"green\"],\n        datalabels: {\n          align: 'end',\n          anchor: 'end',\n          formatter: function (value, ctx) {\n            return value;\n          },\n          color: 'black',\n          font: {\n            size: 14,\n            weight: 500\n          }\n        }\n      }]\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"Section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SubSection SubSectionCenter\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: poll_main_question\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PollQuestionContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"PollQuestion\",\n          children: /*#__PURE__*/_jsxDEV(Bar, {\n            options: options,\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LabelWithButton, {\n      style: {},\n      children: /*#__PURE__*/_jsxDEV(Label, {\n        style: {\n          \"margin-right\": \"15px\"\n        },\n        content: `Total votes : ${totalVotes()}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PollResult, \"hyaoJXhFNbEGLA6hypCL66/nEkc=\");\n\n_c = PollResult;\nexport default PollResult;\n\nvar _c;\n\n$RefreshReg$(_c, \"PollResult\");","map":{"version":3,"names":["React","useEffect","useState","Label","LabelWithButton","Bar","ChartDataLabels","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Tooltip","PollConsumer","register","PollResult","props","options","setOptions","data","setData","poll_question_options","poll_main_question","total_votes","dynamicLabels","map","poll","ind","answer","dynamicVotes","votes","totalVotes","reduce","acc","labels","datasets","backgroundColor","datalabels","align","anchor","formatter","value","ctx","color","font","size","weight"],"sources":["/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollResult/PollResult.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip\n} from 'chart.js';\n\n//import PollProvider\nimport PollConsumer from '../../contexts/pollContext/PollConsumer';\n\ninterface IProps{}\n\n// Register ChartJs\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip,\n  ChartDataLabels\n);\n\nfunction PollResult(props:IProps) {\n\n  // Manage ChartJs options and data\n  const [options,setOptions] = useState<object>();\n  const [data,setData] = useState<object>();\n\n  // use Pollconsumer\n  const {poll_question_options,poll_main_question,total_votes} =  PollConsumer();\n\n  // generate label array\n  const dynamicLabels = () =>{\n    return(poll_question_options.map((poll,ind)=>{\n        return poll.answer;\n    }));\n  }\n\n  // generate vote rates array\n  const dynamicVotes = () =>{\n    return(poll_question_options.map((poll,ind)=>{\n        return poll.votes;\n    }));\n  }\n\n  // generate vote rates array\n  const totalVotes = () =>{\n    return(poll_question_options.reduce((acc,poll)=>{\n        return acc + poll.votes\n    },0));\n  }\n\n  //useEffect \n  useEffect(()=>{\n      // ChartJs display labels\n      setOptions(dynamicLabels());\n    \n      // ChartJs data\n      setData({\n        labels,\n        datasets: [\n          {\n            data: dynamicVotes(),\n            backgroundColor: [\"red\", \"blue\", \"green\"],\n            datalabels: {\n              align: 'end' as const,\n              anchor: 'end' as const,\n              formatter: function(value:string, ctx:object) {\n                  return value;\n              },\n              color:'black',\n              font:{\n                  size: 14,\n                  weight:500\n              }\n            }\n          }\n        ]\n      });\n  });\n\n  return (\n    <section className='Section'>\n\n      <div className='SubSection SubSectionCenter'>\n\n        <h1>{poll_main_question}</h1>\n\n        <div className='PollQuestionContainer'>\n\n          <div className='PollQuestion'>\n             <Bar options={options} data={data} />\n          </div>\n\n          </div>\n\n      </div>\n\n      <LabelWithButton style={{}}>\n             <Label style={{\"margin-right\":\"15px\"}} content={`Total votes : ${totalVotes()}`}/>\n      </LabelWithButton>\n\n    </section>\n  )\n}\n\nexport default PollResult"],"mappings":"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"},"metadata":{},"sourceType":"module"}