{"ast":null,"code":"var _jsxFileName = \"/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollResult/PollResult.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Store from '../../store/Store';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Tooltip } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n// Register ChartJs\nChartJS.register(CategoryScale, LinearScale, BarElement, Tooltip, ChartDataLabels);\n\nfunction PollResult(props) {\n  _s();\n\n  const [pollQuestionOptions, setPollQuestionOptions] = useState([]);\n  const [pollMainQuestion, setPollMainQuestion] = useState(\"\");\n  const dispatch = useDispatch();\n  const question = useSelector(state => state.poll_main_question);\n  useEffect(() => {\n    const poll = Store.getState().Poll;\n    setPollQuestionOptions(poll.poll_question_options);\n    setPollMainQuestion(poll.poll_main_question);\n  }, [question]); // generate label array\n\n  const dynamicLabels = () => {\n    return poll_question_options.map((poll, ind) => {\n      return poll.answer;\n    });\n  }; // generate vote rates array\n\n\n  const dynamicVotes = () => {\n    return poll_question_options.map((poll, ind) => {\n      return poll.votes;\n    });\n  }; // generate vote rates array\n\n\n  const totalVotes = () => {\n    return poll_question_options.reduce((acc, poll) => {\n      return acc + poll.votes;\n    }, 0);\n  }; // ChartJs display options\n\n\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Chart.js Bar Chart'\n      }\n    },\n    scales: {\n      y: {\n        grace: '5%'\n      }\n    }\n  }; // ChartJs display labels\n\n  const labels = dynamicLabels(); // ChartJs data\n\n  const data = {\n    labels,\n    datasets: [{\n      data: dynamicVotes(),\n      backgroundColor: [\"red\", \"blue\", \"green\"],\n      datalabels: {\n        align: 'end',\n        anchor: 'end',\n        formatter: function (value, ctx) {\n          return value;\n        },\n        color: 'black',\n        font: {\n          size: 14,\n          weight: 500\n        }\n      }\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"Section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"SubSection SubSectionCenter\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: poll_main_question\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PollQuestionContainer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"PollQuestion\",\n          children: /*#__PURE__*/_jsxDEV(Bar, {\n            options: options,\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LabelWithButton, {\n      style: {},\n      children: /*#__PURE__*/_jsxDEV(Label, {\n        style: {\n          marginRight: \"15px\"\n        },\n        content: `Total votes : ${totalVotes()}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PollResult, \"445jyWrGZHk4LRnA3raZxggR+vw=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = PollResult;\nexport default PollResult;\n\nvar _c;\n\n$RefreshReg$(_c, \"PollResult\");","map":{"version":3,"names":["React","Label","LabelWithButton","Bar","ChartDataLabels","useSelector","useDispatch","Store","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Tooltip","register","PollResult","props","pollQuestionOptions","setPollQuestionOptions","useState","pollMainQuestion","setPollMainQuestion","dispatch","question","state","poll_main_question","useEffect","poll","getState","Poll","poll_question_options","dynamicLabels","map","ind","answer","dynamicVotes","votes","totalVotes","reduce","acc","options","responsive","plugins","legend","position","title","display","text","scales","y","grace","labels","data","datasets","backgroundColor","datalabels","align","anchor","formatter","value","ctx","color","font","size","weight","marginRight"],"sources":["/Users/amine/Documents/Practices/Sir_vote_a_lot/PollApp/client/my-app/src/components/PollResult/PollResult.tsx"],"sourcesContent":["import React from 'react';\nimport Label from '../FormInput/Label/Label';\nimport LabelWithButton from '../FormInput/LabelWithButton/LabelWithButton';\nimport { Bar } from 'react-chartjs-2';\nimport ChartDataLabels from 'chartjs-plugin-datalabels';\n\nimport { useSelector , useDispatch , shallowEqual} from 'react-redux';\n\nimport { IPoll , IPollQuestionOptions} from '../../@types/poll.d';\nimport Store from '../../store/Store';\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip\n} from 'chart.js';\n\ninterface IProps{}\n\n// Register ChartJs\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Tooltip,\n  ChartDataLabels\n);\n\n\n\nfunction PollResult(props:IProps) {\n\n  const [pollQuestionOptions,setPollQuestionOptions] = useState<IPoll[\"poll_question_options\"]>([]);\n  const [pollMainQuestion,setPollMainQuestion] = useState<string>(\"\");\n\n  const dispatch = useDispatch();\n\n  const question = useSelector<IPoll,IPoll[\"poll_main_question\"]>((state)=>(state.poll_main_question));\n\n  useEffect(()=>{\n    const poll = Store.getState().Poll;\n    setPollQuestionOptions(poll.poll_question_options);\n    setPollMainQuestion(poll.poll_main_question);\n  },[question]);\n  // generate label array\n  const dynamicLabels = () =>{\n    return(poll_question_options.map((poll,ind)=>{\n        return poll.answer;\n    }));\n  }\n\n  // generate vote rates array\n  const dynamicVotes = () =>{\n    return(poll_question_options.map((poll,ind)=>{\n        return poll.votes;\n    }));\n  }\n\n  // generate vote rates array\n  const totalVotes = () =>{\n    return(poll_question_options.reduce((acc,poll)=>{\n        return acc + poll.votes\n    },0));\n  }\n\n  // ChartJs display options\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top' as const,\n      },\n      title: {\n        display: true,\n        text: 'Chart.js Bar Chart',\n      },\n    },\n    scales: {\n        y: {\n          grace: '5%'\n        }\n    }\n  };\n\n  // ChartJs display labels\n  const labels = dynamicLabels();\n  \n  // ChartJs data\n  const data = {\n    labels,\n    datasets: [\n      {\n        data: dynamicVotes(),\n        backgroundColor: [\"red\", \"blue\", \"green\"],\n        datalabels: {\n          align: 'end' as const,\n          anchor: 'end' as const,\n          formatter: function(value:string, ctx:object) {\n              return value;\n          },\n          color:'black',\n          font:{\n              size: 14,\n              weight:500\n          }\n        }\n      }\n    ]\n  };\n\n  return (\n    <section className='Section'>\n\n      <div className='SubSection SubSectionCenter'>\n\n        <h1>{poll_main_question}</h1>\n\n        <div className='PollQuestionContainer'>\n\n          <div className='PollQuestion'>\n             <Bar options={options} data={data} />\n          </div>\n\n          </div>\n\n      </div>\n\n      <LabelWithButton style={{}}>\n             <Label style={{marginRight:\"15px\"}} content={`Total votes : ${totalVotes()}`}/>\n      </LabelWithButton>\n\n    </section>\n  )\n}\n\nexport default PollResult"],"mappings":"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"},"metadata":{},"sourceType":"module"}